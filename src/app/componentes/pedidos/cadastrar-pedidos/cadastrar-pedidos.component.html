<section class="container cadastrar-pedidos ff-inter">
  <header class="header">
    <h4><strong>Emitir Pedido:</strong></h4>
  </header>

  <form
    class="principal__formulario example-form"
    id="formulario"
    #form="ngForm"
    (ngSubmit)="cadastrar(form)"
    f
  >
    <table class="example-full-width" cellspacing="0">
      <td>
        <mat-form-field class="example-full-width" appearance="fill">
          <mat-label>Buscar Cliente</mat-label>
          <input
            type="text"
            matInput
            [formControl]="myControl"
            [matAutocomplete]="auto"
          />
          <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn">
            @for (option of filteredOptions | async; track option) {
              <mat-option [value]="option">{{ option.name }}</mat-option>
            }
          </mat-autocomplete>
        </mat-form-field>
      </td>
      <td>
        <mat-form-field class="example-full-width" appearance="outline">
          <mat-label>Código Cliente</mat-label>
          <input
            matInput
            disabled
            value="Google"
            disabled
            type="textarea"
            name="idCliente"
            [(ngModel)]="dadosPedido.id"
          />
        </mat-form-field>
      </td>
    </table>

    <h6><strong>Informações Cliente:</strong></h6>
    <br />

    <div class="formulario__dupla">
      <div class="formulario_linha">
        <label class="campo__etiqueta" for="nome">Nome:</label>
        <input
          type="textarea"
          class="input"
          id="nome"
          name="nome"
          placeholder="Digite o nome do cliente"
          class="campo__escrita"
          [(ngModel)]="dadosPedido.nome"
          ngModel
          required
          minlength="2"
          #nome="ngModel"
        />
        <div *ngIf="(nome?.invalid && nome?.touched) || nome?.dirty">
          <app-mensagem
            *ngIf="nome?.errors?.['required']"
            mensagem="Preecha seu nome completo."
          ></app-mensagem>
          <app-mensagem
            *ngIf="nome?.errors?.['minlength']"
            mensagem="Nome deve ter mais de 2 caracteres."
          ></app-mensagem>
        </div>
      </div>

      <div class="formulario__campo">
        <label class="campo__etiqueta" for="cpf">CPF:</label>
        <input
          type="textarea"
          class="input"
          id="cpf"
          name="cpf"
          placeholder="Digite o CPF"
          [(ngModel)]="dadosPedido.cpf"
        />
      </div>
    </div>

    <div class="formulario__dupla">
      <div class="formulario__campo">
        <label class="campo__etiqueta" for="telefone">Telefone:</label>
        <input
          type="textarea"
          class="input"
          id="telefone"
          name="telefone"
          placeholder="(XX) XXXX-XXXX"
          [(ngModel)]="dadosPedido.telefone"
          ngModel
          #telefone="ngModel"
          required
          pattern="(\(?\d{2}\)?\s?)(\d{4}\-?\d{4})"
        />
        <div
          *ngIf="(telefone?.invalid && telefone?.touched) || telefone?.dirty"
        >
          <app-mensagem
            *ngIf="telefone?.errors?.['required']"
            mensagem="Campo telefone obrigatório."
          ></app-mensagem>
          <app-mensagem
            *ngIf="telefone?.errors?.['pattern']"
            mensagem="Campo telefone deve ter DDD com 2 digitos e 8/9 digitos."
          ></app-mensagem>
        </div>
      </div>

      <div class="formulario__campo">
        <label class="campo__etiqueta" for="celular">Celular:</label>
        <input
          type="textarea"
          class="input"
          id="celular"
          name="celular"
          placeholder="(XX) XXXXX-XXXX"
          [(ngModel)]="dadosPedido.celular"
          ngModel
          #celular="ngModel"
          required
          pattern="(\(?\d{2}\)?\s?)(\d{5}\-?\d{4})"
        />
        <div *ngIf="(celular?.invalid && celular?.touched) || celular?.dirty">
          <app-mensagem
            *ngIf="celular?.errors?.['required']"
            mensagem="Campo celular obrigatório."
          ></app-mensagem>
          <app-mensagem
            *ngIf="celular?.errors?.['pattern']"
            mensagem="Campo celular deve ter DDD com 2 digitos e 9 digitos."
          ></app-mensagem>
        </div>
      </div>

      <div class="formulario__campo">
        <label class="campo__etiqueta" for="email">E-mail:</label>
        <input
          type="textarea"
          class="input"
          id="email"
          name="email"
          placeholder="Digite o E-mail"
          [(ngModel)]="dadosPedido.email"
          ngModel
          #email="ngModel"
          required
          email
        />
        <div *ngIf="(email?.invalid && email?.touched) || email?.dirty">
          <app-mensagem
            *ngIf="email?.errors?.['required']"
            mensagem="O campo e-mail é obrigatório."
          ></app-mensagem>
          <app-mensagem
            *ngIf="email?.errors?.['email']"
            mensagem="O campo e-mail deve seguir este padrão: exemplo@dominio.com"
          ></app-mensagem>
        </div>
      </div>
    </div>

    <div class="formulario__dupla">
      <div class="formulario__campo">
        <label class="campo__etiqueta" for="cep">CEP:</label>
        <input
          type="textarea"
          class="input"
          id="cep"
          name="cep"
          placeholder="Digite o CEP"
          [(ngModel)]="dadosPedido.cep"
          ngModel
          required
          #cep="ngModel"
          pattern="^(\d{5})(-?\d{3})$"
          minlength="8"
          maxlength="9"
          (blur)="consultaCEP($event, form)"
          validadorCep
        />
        <div *ngIf="(cep?.invalid && cep?.touched) || cep?.dirty">
          <app-mensagem
            *ngIf="cep?.errors?.['required']"
            mensagem="O campo de CEP é obrigatório"
          ></app-mensagem>
          <app-mensagem
            *ngIf="cep?.errors?.['pattern']"
            mensagem="O campo de CEP deve seguir este exemplo: 00000-000"
          ></app-mensagem>
          <app-mensagem
            *ngIf="cep?.errors?.['validadorCep']"
            mensagem="O Cep informado não existe."
          ></app-mensagem>
        </div>
      </div>

      <div class="formulario__campo">
        <label class="campo__etiqueta" for="logradouro">Endereço:</label>
        <input
          type="textarea"
          class="input"
          id="logradouro"
          name="logradouro"
          [(ngModel)]="dadosPedido.logradouro"
        />
      </div>
      <div class="formulario__campo">
        <label class="campo__etiqueta" for="numero">Número:</label>
        <input
          type="textarea"
          class="input"
          id="numero"
          name="numero"
          placeholder="Digite o número do endereço"
          [(ngModel)]="dadosPedido.numero"
        />
      </div>
    </div>

    <div class="formulario__dupla">
      <div class="formulario__campo">
        <label class="campo__etiqueta" for="complemento">Complemento:</label>
        <input
          type="textarea"
          class="input"
          id="complemento"
          name="complemento"
          placeholder="Digite o complemento do endereço"
          [(ngModel)]="dadosPedido.complemento"
        />
      </div>
      <div class="formulario__campo">
        <label class="campo__etiqueta" for="bairro">Bairro:</label>
        <input
          type="textarea"
          class="input"
          id="bairro"
          name="bairro"
          [(ngModel)]="dadosPedido.bairro"
        />
      </div>
      <div class="formulario__campo">
        <label class="campo__etiqueta" for="cidade">Cidade:</label>
        <input
          type="textarea"
          class="input"
          id="cidade"
          name="cidade"
          [(ngModel)]="dadosPedido.cidade"
        />
      </div>

      <div class="formulario__campo">
        <label class="campo__etiqueta" for="estado">UF:</label>
        <input
          type="textarea"
          class="input"
          id="estado"
          name="estado"
          [(ngModel)]="dadosPedido.estado"
        />
      </div>
    </div>

    <br /><br />
    <h6><strong>Informações Empresa:</strong></h6>
    <br />

    <div class="formulario__dupla">
      <div class="formulario_linha">
        <label class="campo__etiqueta" for="fantasia">Nome Fantasia:</label>
        <input
          type="textarea"
          class="input"
          id="fantasia"
          name="fantasia"
          placeholder="Digite o nome fantasia"
          [(ngModel)]="dadosPedido.fantasia"
        />
      </div>
    </div>

    <div class="formulario__dupla">
      <div class="formulario_linha">
        <label class="campo__etiqueta" for="razaoSocial">Razão Social:</label>
        <input
          type="textarea"
          class="input"
          id="razaoSocial"
          name="razaoSocial"
          placeholder="Digite a Razão Social"
          [(ngModel)]="dadosPedido.razaoSocial"
        />
      </div>
      <div class="formulario__campo">
        <label class="campo__etiqueta" for="cnpj">CNPJ:</label>
        <input
          type="textarea"
          class="input"
          id="cnpj"
          name="cnpj"
          placeholder="Digite o CNPJ"
          [(ngModel)]="dadosPedido.cnpj"
        />
      </div>
    </div>

    <br /><br />
    <h6><strong>Informações Pedido:</strong></h6>
    <br />

    <div class="formulario__dupla">
      <div class="formulario_linha">
        <label class="campo__etiqueta" for="tipoPgto">Tipo de Pagamento:</label>
        <div class="container-radio">
          <label for="avista">
            <input
              type="checkbox"
              value="avista"
              id="avista"
              class="input-padrao"
              name="modelo-card"
              [(ngModel)]="dadosPedido.tipoPgto"
            />
            Á vista
          </label>
          <label for="faturado">
            Faturado:
            <select id="dias" name="dias" class="campo__escrita">
              <option>10 dias</option>
              <option>11 dias</option>
              <option>12 dias</option>
              <option>13 dias</option>
              <option>14 dias</option>
              <option>15 dias</option>
              <option>16 dias</option>
              <option>17 dias</option>
              <option>18 dias</option>
              <option>19 dias</option>
              <option>20 dias</option>
              <option>21 dias</option>
              <option>22 dias</option>
              <option>23 dias</option>
              <option>24 dias</option>
              <option>25 dias</option>
              <option>26 dias</option>
              <option>27 dias</option>
              <option>28 dias</option>
              <option>29 dias</option>
              <option>30 dias</option>
            </select>
          </label>
        </div>
      </div>
    </div>

    <div class="formulario__dupla">
      <div class="formulario_linha">
        <label class="campo__etiqueta" for="sfobras">SFOBRAS:</label>
        <input
          type="textarea"
          class="input"
          id="sfobras"
          name="sfobras"
          placeholder="Digite o SFOBRAS"
          [(ngModel)]="dadosPedido.sfobras"
        />
      </div>

      <div class="formulario_linha">
        <label class="campo__etiqueta" for="cno">CNO:</label>
        <input
          type="textarea"
          class="input"
          id="cno"
          name="cno"
          placeholder="Digite o CNO"
          [(ngModel)]="dadosPedido.cno"
        />
      </div>

      <div class="formulario_linha">
        <label class="campo__etiqueta" for="mangueira">Mangueira:</label>
        <select id="estado" name="estado" class="campo__escrita">
          <option>15 metros</option>
          <option>30 metros</option>
          <option>45 metros</option>
          <option>50 metros</option>
          <option>65 metros</option>
          <option>80 metros</option>
        </select>
      </div>

      <div class="formulario_linha">
        <label class="campo__etiqueta" for="ie">Inscrição Estadual:</label>
        <input
          type="textarea"
          class="input"
          id="ie"
          name="ie"
          placeholder="Informe a IE"
          [(ngModel)]="dadosPedido.ie"
        />
      </div>
    </div>

    <div class="formulario__dupla">
      <div class="formulario_linha">
        <div class="container-radio">
          <label class="campo__etiqueta" for="volume">Volume:</label>

          <div class="radio-modelo">
            <label for="volume1">
              <input
                type="radio"
                class="input"
                id="volume1"
                value="cx-5m³"
                name="modelo-card"
                [(ngModel)]="dadosPedido.volume"
              />
              <div class="custom-radio">
                <span></span>
              </div>
              <span>cx-5m³</span>
            </label>
          </div>

          <div class="radio-modelo">
            <label for="volume2">
              <input
                type="radio"
                class="input"
                id="volume2"
                value="cx-10m³"
                name="modelo-card"
                [(ngModel)]="dadosPedido.volume"
              />
              <div class="custom-radio">
                <span></span>
              </div>
              <span>cx-10m³</span>
            </label>
          </div>

          <div class="radio-modelo">
            <label for="volume3">
              <input
                type="radio"
                class="input"
                id="volume3"
                value="cx-15m³"
                name="modelo-card"
                [(ngModel)]="dadosPedido.volume"
              />
              <div class="custom-radio">
                <span></span>
              </div>
              <span>cx-15m³</span>
            </label>
          </div>

          <div class="radio-modelo">
            <label for="volume4">
              <input
                type="radio"
                class="input"
                id="volume4"
                value="lav-5m³"
                name="modelo-card"
                [(ngModel)]="dadosPedido.volume"
              />
              <div class="custom-radio">
                <span></span>
              </div>
              <span>lav-5m³</span>
            </label>
          </div>

          <div class="radio-modelo">
            <label for="volume5">
              <input
                type="radio"
                class="input"
                id="volume5"
                value="lav-10m³"
                name="modelo-card"
                [(ngModel)]="dadosPedido.volume"
              />
              <div class="custom-radio">
                <span></span>
              </div>
              <span>lav-10m³</span>
            </label>
          </div>

          <div class="radio-modelo">
            <label for="volume6">
              <input
                type="radio"
                class="input"
                id="volume6"
                value="lav-15m³"
                name="modelo-card"
                [(ngModel)]="dadosPedido.volume"
              />
              <div class="custom-radio">
                <span></span>
              </div>
              <span>lav-15m³</span>
            </label>
          </div>
        </div>
      </div>
    </div>

    <div class="formulario_preco">
      <label class="campo__etiqueta" for="complemento">Preço:</label>
      <div class="formulario_precos">
        <input
          type="textarea"
          class="input"
          id="preco1"
          name="preco1"
          [(ngModel)]="dadosPedido.preco"
        />
        <input
          type="textarea"
          class="input"
          id="preco2"
          name="preco2"
          [(ngModel)]="dadosPedido.preco"
        />
        <input
          type="textarea"
          class="input"
          id="preco3"
          name="preco3"
          [(ngModel)]="dadosPedido.preco"
        />
        <input
          type="textarea"
          class="input"
          id="preco4"
          name="preco4"
          [(ngModel)]="dadosPedido.preco"
        />
        <input
          type="textarea"
          class="input"
          id="preco5"
          name="preco5"
          [(ngModel)]="dadosPedido.preco"
        />
        <input
          type="textarea"
          class="input"
          id="preco6"
          name="preco6"
          [(ngModel)]="dadosPedido.preco"
        />
      </div>
    </div>

    <div class="formulario__dupla">
      <div class="formulario_linha">
        <label class="campo__etiqueta" for="ajudanteHora"
          >Ajudante p/ hora adicional:</label
        >
        <input
          type="textarea"
          class="input"
          id="ajudanteHora"
          name="ajudanteHora"
          placeholder="Informe o ajudante para hora adicional"
          [(ngModel)]="dadosPedido.ajudanteHora"
        />
      </div>
    </div>

    <div class="formulario__dupla">
      <div class="formulario_linha">
        <label class="campo__etiqueta" for="observacao">Observações:</label>
        <input
          type="textarea"
          class="input"
          id="observacao"
          name="observacao"
          placeholder="Informações adicionais"
          [(ngModel)]="dadosPedido.observacao"
        />
      </div>
    </div>

    <!-- <div class="acoes">
      <button (click)="cadastrar()" class="botao">Salvar</button>
      <button type="submit" class="botao">Salvar</button>
    </div> -->
  </form>

  <div class="container-previa">
    <header class="header">
      <h4><i>Prévia do Pedido:</i></h4>
    </header>
    <div class="modelo modelo1 ff-roboto-mono">
      <img
        class="imagem"
        src="../../../../assets/img/logo.png"
        alt="Logo São Tomé"
      />

      <div class="campos_previa">
        <p class="idPedido">
          <b>PEDIDO: </b>
          <!-- {{ dadosPedido.idPedido }} -->
        </p>
      </div>

      <div class="campos_previa">
        <p class="data">
          <b>DATA: </b>
          <!-- {{ dadosPedido.data }} -->
        </p>
      </div>

      <div class="campos_previa">
        <p class="fantasia">
          <b>CLIENTE: </b>
          {{ dadosPedido.fantasia }}
        </p>
      </div>

      <div class="campos_previa">
        <p class="endereco">
          <b>ENDEREÇO: </b>
          <!-- {{ dadosPedido.endereco }} -->
        </p>
      </div>

      <div class="campos_previa">
        <b>VOLUME: </b>
        {{ dadosPedido.volume }}
        <b>MANGUEIRA: </b>
        {{ dadosPedido.mangueira }}
        <b>PREÇO: </b>
        <p class="preco">
          <!-- {{ dadosPedido.preco }} -->
        </p>
      </div>

      <div class="campos_previa">
        <b>MOTORISTA: </b>
        <b>CAMINHÃO: </b>
        <b>PLACA: </b>
      </div>

      <div class="acoes">
        <button (click)="cancelar()" routerLink="/menu" class="botao">
          Emite Pedido
        </button>
        <button (click)="cancelar()" routerLink="/menu" class="botao">
          Cancelar
        </button>
      </div>
    </div>
  </div>
</section>
