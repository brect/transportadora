<section class="container cadastrar-pedidos ff-inter">
  <header class="header">
    <h4><strong>Emitir Pedido:</strong></h4>
  </header>

  <table class="example-full-width" cellspacing="0">
    <td>
      <mat-form-field class="example-full-width" appearance="fill">
        <mat-label>Buscar Cliente</mat-label>
        <input
          type="text"
          matInput
          [formControl]="myControl"
          [matAutocomplete]="auto"
        />
        <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn">
          @for (option of filteredOptions | async; track option) {
            <mat-option [value]="option">{{ option.name }}</mat-option>
          }
        </mat-autocomplete>
      </mat-form-field>
    </td>
    <td>
      <mat-form-field class="example-full-width" appearance="outline">
        <mat-label>Código Cliente</mat-label>
        <input
          matInput
          disabled
          value="Google"
          disabled
          type="textarea"
          name="idCliente"
          [(ngModel)]="dadosPedido.id"
        />
      </mat-form-field>
    </td>
  </table>

  <mat-slide-toggle color="blue" [(ngModel)]="isChecked"
    >Entregar no mesmo endereço de cadastro:</mat-slide-toggle
  >
  <br />

  <form class="example-form">
    <h6><strong>Informações Cliente:</strong></h6>
    <br />

    <div class="botao-entrega">

      <td>
        <mat-form-field class="example-full-width">
          <mat-label>CEP:</mat-label>
          <input
            disableRipple
            [disabled]="isChecked"
            matInput
            #postalCode
            minlength="8"
            maxlength="9"
            placeholder="Ex. 04053-070"
            name="cepEntrega"
            [(ngModel)]="dadosPedido.cepEntrega"
            ngModel
            required
            #cep="ngModel"
            pattern="^(\d{5})(-?\d{3})$"
            (blur)="consultaCEP($event, form)"
            validadorCep
          />
          <div *ngIf="(cep?.invalid && cep?.touched) || cep?.dirty">
            <app-mensagem
              *ngIf="cep?.errors?.['required']"
              mensagem="O campo de CEP é obrigatório"
            ></app-mensagem>
            <app-mensagem
              *ngIf="cep?.errors?.['validadorCep']"
              mensagem="O Cep informado não existe."
            ></app-mensagem>
          </div>
          <mat-hint align="end">{{ postalCode.value.length }} / 9</mat-hint>
        </mat-form-field>
      </td>

      <table class="example-full-width" cellspacing="0">
        <tr>
          <td>
            <mat-form-field class="example-full-width">
              <mat-label>Logradouro:</mat-label>
              <input
                disableRipple
                [disabled]="isChecked"
                matInput
                name="logradouro"
                [(ngModel)]="dadosPedido.logradouro"
              />
            </mat-form-field>
          </td>
          <mat-form-field class="example-full-width">
            <mat-label>Número:</mat-label>
            <input
              disableRipple
              [disabled]="isChecked"
              matInput
              name="numero"
              [(ngModel)]="dadosPedido.numero"
            />
          </mat-form-field>
        </tr>
      </table>

      <table class="example-full-width" cellspacing="0">
        <tr>
          <td>
            <mat-form-field class="example-full-width">
              <mat-label>Complemento:</mat-label>
              <input
                disableRipple
                [disabled]="isChecked"
                matInput
                placeholder="Ex. Apto 64"
                name="complemento"
                [(ngModel)]="dadosPedido.complemento"
              />
            </mat-form-field>
          </td>
          <td>
            <mat-form-field class="example-full-width">
              <mat-label>Bairro:</mat-label>
              <input
                disableRipple
                [disabled]="isChecked"
                matInput
                name="bairro"
                [(ngModel)]="dadosPedido.bairro"
              />
            </mat-form-field>
          </td>
        </tr>
      </table>

      <table class="example-full-width" cellspacing="0">
        <tr>
          <td>
            <mat-form-field class="example-full-width">
              <mat-label>Cidade:</mat-label>
              <input
                disableRipple
                [disabled]="isChecked"
                matInput
                placeholder="Ex. Santo André"
                name="cidade"
                [(ngModel)]="dadosPedido.cidade"
              />
            </mat-form-field>
          </td>
          <td>
            <mat-form-field class="example-full-width">
              <mat-label>UF:</mat-label>
              <input
                disableRipple
                [disabled]="isChecked"
                matInput
                placeholder="Ex. São Paulo"
                name="estado"
                [(ngModel)]="dadosPedido.estado"
              />
            </mat-form-field>
          </td>
        </tr>
      </table>
    </div>
  </form>
  <br />

  <h5>Forma de Pagamento:</h5>
  <div class="formulario__dupla">
    <mat-card>
      <mat-card-content>
        <section class="example-section">
          <mat-checkbox class="example-margin" [(ngModel)]="disabled"
            >Á Vista</mat-checkbox
          >
        </section>
      </mat-card-content>
    </mat-card>
    <mat-card class="result">
      <mat-card-content>
        <section class="example-section">
          <mat-form-field>
            <mat-label>Faturado:</mat-label>
            <mat-select disableRipple [disabled]="disabled">
              <mat-option value="0"> </mat-option>
              <mat-option value="1">10 dias</mat-option>
              <mat-option value="2">11 dias</mat-option>
              <mat-option value="3">12 dias</mat-option>
              <mat-option value="4">13 dias</mat-option>
              <mat-option value="5">14 dias</mat-option>
              <mat-option value="6">15 dias</mat-option>
              <mat-option value="7">16 dias</mat-option>
              <mat-option value="8">17 dias</mat-option>
              <mat-option value="9">18 dias</mat-option>
              <mat-option value="10">19 dias</mat-option>
              <mat-option value="11">20 dias</mat-option>
              <mat-option value="12">21 dias</mat-option>
              <mat-option value="13">22 dias</mat-option>
              <mat-option value="14">23 dias</mat-option>
              <mat-option value="15">24 dias</mat-option>
              <mat-option value="16">25 dias</mat-option>
              <mat-option value="17">26 dias</mat-option>
              <mat-option value="18">27 dias</mat-option>
              <mat-option value="19">28 dias</mat-option>
              <mat-option value="20">29 dias</mat-option>
              <mat-option value="21">30 dias</mat-option>
            </mat-select>
          </mat-form-field>
        </section>
      </mat-card-content>
    </mat-card>
  </div>

  <br />

  <section class="container cadastrar-pedidos ff-inter">
    <header class="header">
      <h4><strong>Emitir Pedido:</strong></h4>
    </header>

    <form
      class="principal__formulario example-form"
      id="formulario"
      #form="ngForm"
      (ngSubmit)="cadastrar(form)"
      f
    >
      <table class="example-full-width" cellspacing="0">
        <td>
          <mat-form-field class="example-full-width" appearance="fill">
            <mat-label>Buscar Cliente</mat-label>
            <input
              type="text"
              matInput
              [formControl]="myControl"
              [matAutocomplete]="auto"
            />
            <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn">
              @for (option of filteredOptions | async; track option) {
                <mat-option [value]="option">{{ option.name }}</mat-option>
              }
            </mat-autocomplete>
          </mat-form-field>
        </td>
        <td>
          <mat-form-field class="example-full-width" appearance="outline">
            <mat-label>Código Cliente</mat-label>
            <input
              matInput
              disabled
              value="Google"
              disabled
              type="textarea"
              name="idCliente"
              [(ngModel)]="dadosPedido.id"
            />
          </mat-form-field>
        </td>
      </table>

      <h6><strong>Informações Cliente:</strong></h6>
      <br />

      <div class="formulario__dupla">
        <div class="formulario_linha">
          <label class="campo__etiqueta" for="nome">Nome:</label>
          <input
            type="textarea"
            class="input"
            id="nome"
            name="nome"
            placeholder="Digite o nome do cliente"
            class="campo__escrita"
            [(ngModel)]="dadosPedido.nome"
            ngModel
            required
            minlength="2"
            #nome="ngModel"
          />
          <div *ngIf="(nome?.invalid && nome?.touched) || nome?.dirty">
            <app-mensagem
              *ngIf="nome?.errors?.['required']"
              mensagem="Preecha seu nome completo."
            ></app-mensagem>
            <app-mensagem
              *ngIf="nome?.errors?.['minlength']"
              mensagem="Nome deve ter mais de 2 caracteres."
            ></app-mensagem>
          </div>
        </div>

        <div class="formulario__campo">
          <label class="campo__etiqueta" for="cpf">CPF:</label>
          <input
            type="textarea"
            class="input"
            id="cpf"
            name="cpf"
            placeholder="Digite o CPF"
            [(ngModel)]="dadosPedido.cpf"
          />
        </div>
      </div>

      <div class="formulario__dupla">
        <div class="formulario__campo">
          <label class="campo__etiqueta" for="telefone">Telefone:</label>
          <input
            type="textarea"
            class="input"
            id="telefone"
            name="telefone"
            placeholder="(XX) XXXX-XXXX"
            [(ngModel)]="dadosPedido.telefone"
            ngModel
            #telefone="ngModel"
            required
            pattern="(\(?\d{2}\)?\s?)(\d{4}\-?\d{4})"
          />
          <div
            *ngIf="(telefone?.invalid && telefone?.touched) || telefone?.dirty"
          >
            <app-mensagem
              *ngIf="telefone?.errors?.['required']"
              mensagem="Campo telefone obrigatório."
            ></app-mensagem>
            <app-mensagem
              *ngIf="telefone?.errors?.['pattern']"
              mensagem="Campo telefone deve ter DDD com 2 digitos e 8/9 digitos."
            ></app-mensagem>
          </div>
        </div>

        <div class="formulario__campo">
          <label class="campo__etiqueta" for="celular">Celular:</label>
          <input
            type="textarea"
            class="input"
            id="celular"
            name="celular"
            placeholder="(XX) XXXXX-XXXX"
            [(ngModel)]="dadosPedido.celular"
            ngModel
            #celular="ngModel"
            required
            pattern="(\(?\d{2}\)?\s?)(\d{5}\-?\d{4})"
          />
          <div *ngIf="(celular?.invalid && celular?.touched) || celular?.dirty">
            <app-mensagem
              *ngIf="celular?.errors?.['required']"
              mensagem="Campo celular obrigatório."
            ></app-mensagem>
            <app-mensagem
              *ngIf="celular?.errors?.['pattern']"
              mensagem="Campo celular deve ter DDD com 2 digitos e 9 digitos."
            ></app-mensagem>
          </div>
        </div>

        <div class="formulario__campo">
          <label class="campo__etiqueta" for="email">E-mail:</label>
          <input
            type="textarea"
            class="input"
            id="email"
            name="email"
            placeholder="Digite o E-mail"
            [(ngModel)]="dadosPedido.email"
            ngModel
            #email="ngModel"
            required
            email
          />
          <div *ngIf="(email?.invalid && email?.touched) || email?.dirty">
            <app-mensagem
              *ngIf="email?.errors?.['required']"
              mensagem="O campo e-mail é obrigatório."
            ></app-mensagem>
            <app-mensagem
              *ngIf="email?.errors?.['email']"
              mensagem="O campo e-mail deve seguir este padrão: exemplo@dominio.com"
            ></app-mensagem>
          </div>
        </div>
      </div>

      <div class="formulario__dupla">
        <div class="formulario__campo">
          <label class="campo__etiqueta" for="cep">CEP:</label>
          <input
            type="textarea"
            class="input"
            id="cep"
            name="cep"
            placeholder="Digite o CEP"
            [(ngModel)]="dadosPedido.cep"
            ngModel
            required
            #cep="ngModel"
            pattern="^(\d{5})(-?\d{3})$"
            minlength="8"
            maxlength="9"
            (blur)="consultaCEP($event, form)"
            validadorCep
          />
          <div *ngIf="(cep?.invalid && cep?.touched) || cep?.dirty">
            <app-mensagem
              *ngIf="cep?.errors?.['required']"
              mensagem="O campo de CEP é obrigatório"
            ></app-mensagem>
            <app-mensagem
              *ngIf="cep?.errors?.['pattern']"
              mensagem="O campo de CEP deve seguir este exemplo: 00000-000"
            ></app-mensagem>
            <app-mensagem
              *ngIf="cep?.errors?.['validadorCep']"
              mensagem="O Cep informado não existe."
            ></app-mensagem>
          </div>
        </div>

        <div class="formulario__campo">
          <label class="campo__etiqueta" for="logradouro">Logradouro:</label>
          <input
            type="textarea"
            class="input"
            id="logradouro"
            name="logradouro"
            [(ngModel)]="dadosPedido.logradouro"
          />
        </div>
        <div class="formulario__campo">
          <label class="campo__etiqueta" for="numero">Número:</label>
          <input
            type="textarea"
            class="input"
            id="numero"
            name="numero"
            placeholder="Digite o número do endereço"
            [(ngModel)]="dadosPedido.numero"
          />
        </div>
      </div>

      <div class="formulario__dupla">
        <div class="formulario__campo">
          <label class="campo__etiqueta" for="complemento">Complemento:</label>
          <input
            type="textarea"
            class="input"
            id="complemento"
            name="complemento"
            placeholder="Digite o complemento do endereço"
            [(ngModel)]="dadosPedido.complemento"
          />
        </div>
        <div class="formulario__campo">
          <label class="campo__etiqueta" for="bairro">Bairro:</label>
          <input
            type="textarea"
            class="input"
            id="bairro"
            name="bairro"
            [(ngModel)]="dadosPedido.bairro"
          />
        </div>
        <div class="formulario__campo">
          <label class="campo__etiqueta" for="cidade">Cidade:</label>
          <input
            type="textarea"
            class="input"
            id="cidade"
            name="cidade"
            [(ngModel)]="dadosPedido.cidade"
          />
        </div>

        <div class="formulario__campo">
          <label class="campo__etiqueta" for="estado">UF:</label>
          <input
            type="textarea"
            class="input"
            id="estado"
            name="estado"
            [(ngModel)]="dadosPedido.estado"
          />
        </div>
      </div>

      <br /><br />
      <h6><strong>Informações Empresa:</strong></h6>
      <br />

      <div class="formulario__dupla">
        <div class="formulario_linha">
          <label class="campo__etiqueta" for="fantasia">Nome Fantasia:</label>
          <input
            type="textarea"
            class="input"
            id="fantasia"
            name="fantasia"
            placeholder="Digite o nome fantasia"
            [(ngModel)]="dadosPedido.fantasia"
          />
        </div>
      </div>

      <div class="formulario__dupla">
        <div class="formulario_linha">
          <label class="campo__etiqueta" for="razaoSocial">Razão Social:</label>
          <input
            type="textarea"
            class="input"
            id="razaoSocial"
            name="razaoSocial"
            placeholder="Digite a Razão Social"
            [(ngModel)]="dadosPedido.razaoSocial"
          />
        </div>
        <div class="formulario__campo">
          <label class="campo__etiqueta" for="cnpj">CNPJ:</label>
          <input
            type="textarea"
            class="input"
            id="cnpj"
            name="cnpj"
            placeholder="Digite o CNPJ"
            [(ngModel)]="dadosPedido.cnpj"
          />
        </div>
      </div>

      <br /><br />
      <h6><strong>Informações Pedido:</strong></h6>
      <br />

      <div class="formulario__dupla">
        <div class="formulario_linha">
          <label class="campo__etiqueta" for="tipoPgto"
            >Forma de Pagamento:</label
          >
          <div class="container-radio">
            <mat-checkbox
              [(ngModel)]="dadosPedido.tipoPgto"
              class="example-margin"
              >Á vista</mat-checkbox
            >

            <mat-form-field>
              <mat-label>Faturado:</mat-label>
              <mat-select disableRipple>
                <mat-option value="1">10 dias</mat-option>
                <mat-option value="2">11 dias</mat-option>
                <mat-option value="3">12 dias</mat-option>
                <mat-option value="4">13 dias</mat-option>
                <mat-option value="5">14 dias</mat-option>
                <mat-option value="6">15 dias</mat-option>
                <mat-option value="7">16 dias</mat-option>
                <mat-option value="8">17 dias</mat-option>
                <mat-option value="9">18 dias</mat-option>
                <mat-option value="10">19 dias</mat-option>
                <mat-option value="11">20 dias</mat-option>
                <mat-option value="12">21 dias</mat-option>
                <mat-option value="13">22 dias</mat-option>
                <mat-option value="14">23 dias</mat-option>
                <mat-option value="15">24 dias</mat-option>
                <mat-option value="16">25 dias</mat-option>
                <mat-option value="17">26 dias</mat-option>
                <mat-option value="18">27 dias</mat-option>
                <mat-option value="19">28 dias</mat-option>
                <mat-option value="20">29 dias</mat-option>
                <mat-option value="21">30 dias</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
      </div>

      <mat-slide-toggle color="blue" [(ngModel)]="isChecked"
        >Entregar no mesmo endereço de cadastro:
        {{ isChecked }}</mat-slide-toggle
      ><br />

      <div class="formulario__dupla">
        <div class="formulario_linha">
          <label class="campo__etiqueta" for="sfobras">SFOBRAS:</label>
          <input
            type="textarea"
            class="input"
            id="sfobras"
            name="sfobras"
            placeholder="Digite o SFOBRAS"
            [(ngModel)]="dadosPedido.sfobras"
          />
        </div>

        <div class="formulario_linha">
          <label class="campo__etiqueta" for="cno">CNO:</label>
          <input
            type="textarea"
            class="input"
            id="cno"
            name="cno"
            placeholder="Digite o CNO"
            [(ngModel)]="dadosPedido.cno"
          />
        </div>

        <div class="formulario_linha">
          <label class="campo__etiqueta" for="mangueira">Mangueira:</label>
          <mat-form-field>
            <mat-label>Selecione o tamanho</mat-label>
            <select matNativeControl [(ngModel)]="selectedMetros" name="metro">
              <option value="" selected></option>
              @for (metro of metros; track metro) {
                <option [value]="metro.value">{{ metro.viewValue }}</option>
              }
            </select>
          </mat-form-field>
        </div>

        <div class="formulario_linha">
          <label class="campo__etiqueta" for="ie">Inscrição Estadual:</label>
          <input
            type="textarea"
            class="input"
            id="ie"
            name="ie"
            placeholder="Informe a IE"
            [(ngModel)]="dadosPedido.ie"
          />
        </div>
      </div>

      <div class="formulario__dupla">
        <div class="formulario_linha">
          <div class="container-radio">
            <label class="campo__etiqueta" for="volume">Volume:</label>

            <div class="radio-modelo">
              <label for="volume1">
                <input
                  type="radio"
                  class="input"
                  id="volume1"
                  value="cx-5m³"
                  name="modelo-card"
                  [(ngModel)]="dadosPedido.volume"
                />
                <div class="custom-radio">
                  <span></span>
                </div>
                <span>cx-5m³</span>
              </label>
            </div>

            <div class="radio-modelo">
              <label for="volume2">
                <input
                  type="radio"
                  class="input"
                  id="volume2"
                  value="cx-10m³"
                  name="modelo-card"
                  [(ngModel)]="dadosPedido.volume"
                />
                <div class="custom-radio">
                  <span></span>
                </div>
                <span>cx-10m³</span>
              </label>
            </div>

            <div class="radio-modelo">
              <label for="volume3">
                <input
                  type="radio"
                  class="input"
                  id="volume3"
                  value="cx-15m³"
                  name="modelo-card"
                  [(ngModel)]="dadosPedido.volume"
                />
                <div class="custom-radio">
                  <span></span>
                </div>
                <span>cx-15m³</span>
              </label>
            </div>

            <div class="radio-modelo">
              <label for="volume4">
                <input
                  type="radio"
                  class="input"
                  id="volume4"
                  value="lav-5m³"
                  name="modelo-card"
                  [(ngModel)]="dadosPedido.volume"
                />
                <div class="custom-radio">
                  <span></span>
                </div>
                <span>lav-5m³</span>
              </label>
            </div>

            <div class="radio-modelo">
              <label for="volume5">
                <input
                  type="radio"
                  class="input"
                  id="volume5"
                  value="lav-10m³"
                  name="modelo-card"
                  [(ngModel)]="dadosPedido.volume"
                />
                <div class="custom-radio">
                  <span></span>
                </div>
                <span>lav-10m³</span>
              </label>
            </div>
            <div class="radio-modelo">
              <label for="volume6">
                <input
                  type="radio"
                  class="input"
                  id="volume6"
                  value="lav-15m³"
                  name="modelo-card"
                  [(ngModel)]="dadosPedido.volume"
                />
                <div class="custom-radio">
                  <span></span>
                </div>
                <span>lav-15m³</span>
              </label>
            </div>
          </div>
        </div>
      </div>

      <div class="formulario_preco">
        <label class="campo__etiqueta" for="complemento">Preço:</label>
        <div class="formulario_precos">
          <input
            type="textarea"
            class="input"
            id="preco1"
            name="preco1"
            [(ngModel)]="dadosPedido.preco"
          />
          <input
            type="textarea"
            class="input"
            id="preco2"
            name="preco2"
            [(ngModel)]="dadosPedido.preco"
          />
          <input
            type="textarea"
            class="input"
            id="preco3"
            name="preco3"
            [(ngModel)]="dadosPedido.preco"
          />
          <input
            type="textarea"
            class="input"
            id="preco4"
            name="preco4"
            [(ngModel)]="dadosPedido.preco"
          />
          <input
            type="textarea"
            class="input"
            id="preco5"
            name="preco5"
            [(ngModel)]="dadosPedido.preco"
          />
          <input
            type="textarea"
            class="input"
            id="preco6"
            name="preco6"
            [(ngModel)]="dadosPedido.preco"
          />
        </div>
      </div>

      <div class="formulario__dupla">
        <div class="formulario_linha">
          <label class="campo__etiqueta" for="ajudanteHora"
            >Ajudante p/ hora adicional:</label
          >
          <input
            type="textarea"
            class="input"
            id="ajudanteHora"
            name="ajudanteHora"
            placeholder="Informe o ajudante para hora adicional"
            [(ngModel)]="dadosPedido.ajudanteHora"
          />
        </div>
      </div>

      <div class="formulario__dupla">
        <div class="formulario_linha">
          <label class="campo__etiqueta" for="observacao">Observações:</label>
          <input
            type="textarea"
            class="input"
            id="observacao"
            name="observacao"
            placeholder="Informações adicionais"
            [(ngModel)]="dadosPedido.observacao"
          />
        </div>
      </div>

      <!-- <div class="acoes">
      <button (click)="cadastrar()" class="botao">Salvar</button>
      <button type="submit" class="botao">Salvar</button>
    </div> -->
    </form>

    <div class="container-previa">
      <header class="header">
        <h4><i>Prévia do Pedido:</i></h4>
      </header>
      <div class="modelo modelo1 ff-roboto-mono">
        <img
          class="imagem"
          src="../../../../assets/img/logo.png"
          alt="Logo São Tomé"
        />

        <mat-list>
          <mat-divider></mat-divider>
        </mat-list>

        <div class="campos_previa">
          <p class="idPedido">
            <b>PEDIDO: </b>
            <!-- {{ dadosPedido.idPedido }} -->
          </p>
        </div>

        <div class="campos_previa">
          <p class="data">
            <b>DATA: </b>
            <!-- {{ dadosPedido.data }} -->
            {{ dataAtual | date: "dd/MM/yyyy" }}
          </p>
        </div>

        <mat-list>
          <mat-divider></mat-divider>
        </mat-list>

        <div class="campos_previa">
          <p class="fantasia">
            <b>CLIENTE: </b>
            {{ dadosPedido.fantasia }}
          </p>
        </div>

        <div class="campos_previa">
          <p class="endereco">
            <b>ENDEREÇO: </b>
            <!-- {{ dadosPedido.endereco }} -->
          </p>
        </div>

        <div class="campos_previa">
          <b>VOLUME: </b>
          {{ dadosPedido.volume }}
          <b>MANGUEIRA: </b>
          {{ selectedMetros }}
          <b>PREÇO: </b>
          <p class="preco">
            <!-- {{ dadosPedido.preco }} -->
          </p>
        </div>

        <div class="campos_previa">
          <b>MOTORISTA: </b>
          <b>CAMINHÃO: </b>
          <b>PLACA: </b>
        </div>

        <mat-list>
          <mat-divider></mat-divider>
        </mat-list>

        <div class="acoes">
          <button (click)="cancelar()" routerLink="/menu" class="botao">
            Emite Pedido
          </button>
          <button (click)="cancelar()" routerLink="/menu" class="botao">
            Cancelar
          </button>
        </div>
      </div>
    </div>
  </section>
</section>
